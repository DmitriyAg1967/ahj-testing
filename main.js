(()=>{"use strict";new class{constructor(t){this.parentEl=t,this.activeCard=null}static get markup(){return'\n    <div class="card-validator">\n      <ul class="cards">\n        <li>\n          <span class="card visa" title="Visa">Visa</span>\n        </li>\n        <li>\n          <span class="card master" title="Mastercard">Mastercard</span>\n        </li>\n        <li>\n          <span class="card maestro" title="Maestro">Maestro</span>\n        </li>\n        <li>\n          <span class="card amex" title="American Express">American Express</span>\n        </li>\n        <li>\n          <span class="card discover" title="Discover">Discover</span>\n        </li>\n        <li>\n          <span class="card diners" title="Diners Club">Diners Club</span>\n        </li>\n        <li>\n          <span class="card jcb" title="JCB International">JCB International</span>\n        </li>\n        <li>\n          <span class="card unionpay" title="China UnionPay">China UnionPay</span>\n        </li>\n        <li>\n          <span class="card mir" title="Мир">Мир</span>\n        </li>\n      </ul>\n      <form class="validator-form" data-id="form">\n        <input class="form-control" name="card_number" type="text" placeholder="Card number" required>\n        <a class="form-button" href="." data-id="button">Click to Validate</a>\n      </form>\n      <p class="result"></p>\n    </div>\n    '}static get buttonSelector(){return"[data-id=button]"}static get formSelector(){return"[data-id=form]"}static get inputSelector(){return".form-control"}static get cardSelector(){return".card"}static get resultSelector(){return".result"}bindToDOM(){this.parentEl.innerHTML=this.constructor.markup,this.button=this.parentEl.querySelector(this.constructor.buttonSelector),this.form=this.parentEl.querySelector(this.constructor.formSelector),this.input=this.parentEl.querySelector(this.constructor.inputSelector),this.cards=this.parentEl.querySelectorAll(this.constructor.cardSelector),this.result=this.parentEl.querySelector(this.constructor.resultSelector),this.button.addEventListener("click",(t=>this.onSubmit(t))),this.form.addEventListener("submit",(t=>this.onSubmit(t)))}onSubmit(t){t.preventDefault(),this.activeCard&&(this.activeCard.classList.remove("card-highlight"),this.activeCard=null);const e=this.input.value.trim(),s=function(t){const e={status:!1,text:"No number value"};return t?isNaN(+t)?(e.text="Invalid characters in the card number",e):t.length<13?(e.text="The number is too short",e):(e.status=function(t){let e,s=0;for(let r=0;r<t.length;r++)e=+t[r],r%2||(e*=2,e>9&&(e-=9)),s+=e;return!(s%10)}(t),e.status?e.text="The number is valid":e.text="The number is invalid",e):e}(e);if(this.result.innerText=s.text,!s.status)return void this.result.classList.remove("valid");this.input.value="",this.result.classList.add("valid");const r=function(t){if("4"===t[0])return 0;if("2"===t[0])return 8;switch(+t.slice(0,2)){case 51:case 52:case 53:case 54:case 55:return 1;case 50:case 56:case 57:case 58:case 63:case 67:return 2;case 34:case 37:return 3;case 60:return 4;case 30:case 36:case 38:return 5;case 31:case 35:return 6;case 62:return 7;default:return-1}}(e);r<0?this.result.innerText+=" (unknown payment system)":(this.activeCard=this.cards[r],this.activeCard.classList.add("card-highlight"))}}(document.querySelector(".container")).bindToDOM()})();